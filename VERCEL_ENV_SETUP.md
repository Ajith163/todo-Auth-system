# Vercel Environment Variables Setup Guide

## üöÄ **Step-by-Step Process**

### **Step 1: Set Up Database**

Choose one of these options:

#### **Option A: Vercel Postgres (Recommended)**

1. **Go to Vercel Dashboard**
   - Visit [vercel.com](https://vercel.com)
   - Sign in to your account

2. **Create Database**
   - Click on your project
   - Go to **Storage** tab
   - Click **Create Database**
   - Select **Postgres**
   - Choose your plan (Hobby is free)
   - Click **Create**

3. **Get Connection String**
   - Once created, click on your database
   - Go to **Settings** tab
   - Copy the **Connection String**
   - It looks like: `postgresql://username:password@host:port/database`

#### **Option B: Supabase**

1. **Create Supabase Project**
   - Go to [supabase.com](https://supabase.com)
   - Create a new project

2. **Get Connection String**
   - Go to **Settings** ‚Üí **Database**
   - Copy the **Connection String**

#### **Option C: Railway**

1. **Create Railway Project**
   - Go to [railway.app](https://railway.app)
   - Create a new project

2. **Add PostgreSQL**
   - Click **New Service**
   - Select **PostgreSQL**
   - Copy the connection string

### **Step 2: Set Environment Variables in Vercel**

#### **Method 1: Vercel Dashboard (Recommended)**

1. **Go to Vercel Dashboard**
   - Visit [vercel.com](https://vercel.com)
   - Click on your project

2. **Navigate to Environment Variables**
   - Click **Settings** tab
   - Click **Environment Variables** in the left sidebar

3. **Add Each Variable**

   **Variable 1: DATABASE_URL**
   - **Name**: `DATABASE_URL`
   - **Value**: Your PostgreSQL connection string from Step 1
   - **Environment**: Production, Preview, Development
   - Click **Save**

   **Variable 2: NEXTAUTH_URL**
   - **Name**: `NEXTAUTH_URL`
   - **Value**: `https://your-project-name.vercel.app` (replace with your actual URL)
   - **Environment**: Production, Preview, Development
   - Click **Save**

   **Variable 3: NEXTAUTH_SECRET**
   - **Name**: `NEXTAUTH_SECRET`
   - **Value**: `d2f35fe4b43b4c9392af245b6917641910e4a1ab8bebdc6ba06fbe0b8fca8ebe` (use the one generated by the script)
   - **Environment**: Production, Preview, Development
   - Click **Save**

#### **Method 2: Vercel CLI**

```bash
# Install Vercel CLI
npm i -g vercel

# Login to Vercel
vercel login

# Add environment variables
vercel env add DATABASE_URL
vercel env add NEXTAUTH_URL
vercel env add NEXTAUTH_SECRET
```

### **Step 3: Deploy Your Application**

1. **Push Code to GitHub**
   ```bash
   git add .
   git commit -m "Add environment variables setup"
   git push origin main
   ```

2. **Vercel Auto-Deploy**
   - Vercel will automatically detect the push
   - It will start building your application
   - The build should now succeed with the environment variables

### **Step 4: Verify Deployment**

1. **Check Build Logs**
   - Go to your Vercel project
   - Click on the latest deployment
   - Check that the build completes successfully

2. **Test Your Application**
   - Visit your Vercel URL
   - Test the signup/signin functionality
   - Create some todos to verify database connection

## üîß **Troubleshooting**

### **Build Still Failing?**

1. **Check Environment Variables**
   - Go to Vercel dashboard ‚Üí Settings ‚Üí Environment Variables
   - Verify all variables are set correctly
   - Make sure they're set for all environments (Production, Preview, Development)

2. **Check Database Connection**
   - Verify your DATABASE_URL is correct
   - Test the connection string locally
   - Make sure the database is accessible

3. **Check NEXTAUTH_URL**
   - Must match your actual Vercel deployment URL
   - Should be `https://your-project-name.vercel.app`

### **Common Issues**

1. **"DATABASE_URL is not defined"**
   - Solution: Add DATABASE_URL to Vercel environment variables

2. **"NEXTAUTH_URL is not defined"**
   - Solution: Add NEXTAUTH_URL to Vercel environment variables

3. **"Database connection failed"**
   - Solution: Check your database connection string
   - Make sure the database is running and accessible

4. **"Authentication failed"**
   - Solution: Verify NEXTAUTH_SECRET is set correctly
   - Make sure NEXTAUTH_URL matches your deployment URL

## üìã **Environment Variables Summary**

| Variable | Value | Required |
|----------|-------|----------|
| `DATABASE_URL` | PostgreSQL connection string | ‚úÖ Yes |
| `NEXTAUTH_URL` | Your Vercel deployment URL | ‚úÖ Yes |
| `NEXTAUTH_SECRET` | Secure random string | ‚úÖ Yes |
| `PUSHER_APP_ID` | From Pusher dashboard | ‚ùå No |
| `PUSHER_KEY` | From Pusher dashboard | ‚ùå No |
| `PUSHER_SECRET` | From Pusher dashboard | ‚ùå No |
| `PUSHER_CLUSTER` | From Pusher dashboard | ‚ùå No |

## üéØ **Success Checklist**

- ‚úÖ Database created and connection string obtained
- ‚úÖ DATABASE_URL set in Vercel environment variables
- ‚úÖ NEXTAUTH_URL set to your Vercel deployment URL
- ‚úÖ NEXTAUTH_SECRET set to a secure random string
- ‚úÖ Code pushed to GitHub
- ‚úÖ Vercel deployment completed successfully
- ‚úÖ Application working correctly

## üöÄ **Next Steps**

After successful deployment:

1. **Set up your database schema**
   ```bash
   npx drizzle-kit push
   ```

2. **Create an admin user**
   ```bash
   node scripts/create-admin.js
   ```

3. **Test all features**
   - User registration and login
   - Todo creation and management
   - Admin dashboard functionality

Your application should now be fully deployed and functional on Vercel! üéâ 